<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Medical Terminology Quiz</title>
  <style>
    body { font-family: sans-serif; background: #f8f9fa; padding: 20px; }
    .question { background: white; padding: 15px; margin-bottom: 20px; border-radius: 10px; box-shadow: 0 0 5px rgba(0,0,0,0.1); }
    .question h3 { color: #007bff; }
    select { width: 100%; padding: 8px; margin-top: 10px; }
    button { padding: 10px 20px; font-size: 16px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; margin-top: 20px; }
    .result { background: #e2f0d9; padding: 15px; border-radius: 8px; margin-top: 20px; }
    .explanation { font-size: 14px; color: #555; }
  </style>
</head>
<body>
  <h1>Medical Terminology Review Quiz</h1>
  <form id="quizForm"></form>
  <button type="button" onclick="submitQuiz()">Submit</button>
  <div id="result" class="result" style="display:none;"></div>
  <script>
    const questions = [
      {
        key: "q1",
        text: "What does the suffix '-cele' mean?",
        options: ["tumor", "hernia or protrusion", "cutting into", "enlargement"],
        correct: "B",
        explanation: "'-cele' means hernia or protrusion."
      },
      {
        key: "q2",
        text: "What is the meaning of the prefix 'brady-'?",
        options: ["fast", "slow", "excessive", "none"],
        correct: "B",
        explanation: "'Brady-' means slow (e.g., bradycardia = slow heart rate)."
      },
      {
        key: "q3",
        text: "What does the term 'osteopenia' refer to?",
        options: ["Bone inflammation", "Bone enlargement", "Bone deficiency", "Bone tumor"],
        correct: "C",
        explanation: "'Osteopenia' refers to decreased bone density."
      }
      // TODO: ÎÇòÎ®∏ÏßÄ Î¨∏Ï†úÎèÑ Ïù¥ ÌòïÏãùÎåÄÎ°ú Í≥ÑÏÜç Ï∂îÍ∞Ä Í∞ÄÎä•
    ];

    function loadQuiz() {
      const form = document.getElementById("quizForm");
      form.innerHTML = "";
      questions.forEach((q, index) => {
        const optionsHtml = q.options.map((opt, i) => {
          const letter = String.fromCharCode(65 + i); // A, B, C, D
          return `<option value="${letter}">${letter}. ${opt}</option>`;
        }).join('');
        form.innerHTML += `
          <div class='question'>
            <h3>${index + 1}. ${q.text}</h3>
            <select name='${q.key}'>
              <option value=''>-- Choose an answer --</option>
              ${optionsHtml}
            </select>
          </div>
        `;
      });
    }

    function submitQuiz() {
      const form = document.getElementById("quizForm");
      let score = 0;
      let wrongAnswers = [];
      let resultHtml = "<h2>Results:</h2>";

      questions.forEach((q, idx) => {
        const selected = form.elements[q.key].value;
        if (selected === q.correct) {
          score++;
          resultHtml += `<p>Q${idx + 1}: ‚úÖ Correct<br><span class="explanation">${q.explanation}</span></p>`;
        } else {
          resultHtml += `<p>Q${idx + 1}: ‚ùå Incorrect (Correct: ${q.correct})<br><span class="explanation">${q.explanation}</span></p>`;
          wrongAnswers.push(q);
        }
      });

      resultHtml += `<p><strong>Total Score: ${score} / ${questions.length}</strong></p>`;

      if (wrongAnswers.length > 0) {
        localStorage.setItem("wrongAnswers", JSON.stringify(wrongAnswers));
        resultHtml += `<button onclick="reviewWrong()">üîÅ Retry Wrong Answers</button>`;
      }

      const resultDiv = document.getElementById("result");
      resultDiv.innerHTML = resultHtml;
      resultDiv.style.display = "block";
    }

    function reviewWrong() {
      const wrong = JSON.parse(localStorage.getItem("wrongAnswers") || "[]");
      if (wrong.length === 0) {
        alert("No wrong answers to review!");
        return;
      }
      questions.length = 0; // Í∏∞Ï°¥ Îç∞Ïù¥ÌÑ∞ Ï¥àÍ∏∞Ìôî
      questions.push(...wrong); // Ïò§ÎãµÎßå Îã§Ïãú ÌÄ¥Ï¶àÏóê ÏÑ§Ï†ï
      loadQuiz(); // Îã§Ïãú Î°úÎî©
      document.getElementById("result").style.display = "none";
    }

    loadQuiz();
  </script>
</body>
</html>
